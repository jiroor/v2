# shadcn/ui のアクセシビリティ評価

## 日付
2025-10-29

## 概要
shadcn/uiが本プロジェクトのアクセシビリティ要件を満たすかを評価する。

---

## 結論: ✅ **完全に満たしている**

shadcn/uiは、Radix UIをベースとしているため、**最高水準のアクセシビリティ**を提供する。

---

## 詳細評価

### 1. WCAG準拠 ✅

#### 準拠状況
- **WAI-ARIA準拠**: 完全対応
- **WCAG準拠**: 教育・公共・政府・企業プロジェクトで要求される基準を満たす
- **テスト済み**: すべてのコンポーネントがWCAGとARIAの準拠テスト済み

#### 具体的な準拠内容
shadcn/uiのベースであるRadix UIは、WAI-ARIA Authoring Practicesに完全準拠している。

**参考**: 本プロジェクトで実施したUX/アクセシビリティ改善（最小タッチターゲット24px、推奨44px、フォーカス表示など）は、shadcn/uiでは**デフォルトで実装済み**。

---

### 2. キーボードナビゲーション ✅

#### サポート内容
- **WAI-ARIA Authoring Practices準拠**: すべてのコンポーネント
- **基本的なキーボード操作**: Tab, Enter, Space, Escape, 矢印キーなど
- **フォーカストラップ**: モーダル・ダイアログで適切に実装
- **フォーカス管理**: プログラム的にフォーカスを適切な要素に移動

#### 具体例
- **Dialog/Modal**:
  - 開いた時にCancel/Close ボタンにフォーカス
  - Escapeキーで閉じる
  - フォーカスがダイアログ内に閉じ込められる（トラップ）
- **Tabs**:
  - 矢印キーでタブ間を移動
  - Home/Endキーで最初/最後のタブへ
- **Dropdown Menu**:
  - 矢印キーで項目を移動
  - Enterで選択
  - Escapeで閉じる

---

### 3. ARIA属性 ✅

#### 自動処理される属性
Radix UIが以下を自動的に処理：
- `aria-label`
- `aria-labelledby`
- `aria-describedby`
- `aria-expanded`
- `aria-controls`
- `aria-haspopup`
- `aria-hidden`
- `role` 属性

#### メリット
開発者が手動でARIA属性を実装する必要がない。エラーや漏れのリスクを削減。

#### 注意点
shadcn/uiはコピー&ペーストでコードを所有するため、**適切に使用する責任は開発者にある**。
- `aria-label`を設定すべき箇所で設定しているか
- `aria-describedby`が適切か
- Tabキーでアクセス可能か
- Escapeでモーダルが閉じるか

など、実装後の確認は必要。

---

### 4. スクリーンリーダー対応 ✅

#### サポート内容
- フォーカス移動時に適切なアナウンスメント
- Live Regionsのサポート
- 状態変化の通知
- 適切なセマンティックHTML

#### 具体例
- ボタンがクリックされた時
- モーダルが開いた/閉じた時
- 選択状態が変わった時
- エラーが発生した時

これらがスクリーンリーダーユーザーに適切に通知される。

---

### 5. フォーカス管理 ✅

#### 実装されている機能
- **プログラム的なフォーカス移動**: モーダル開閉時など
- **フォーカストラップ**: ダイアログ内にフォーカスを閉じ込める
- **フォーカスリング（:focus-visible）**: キーボード操作時のみ表示
- **初期フォーカス**: 適切な要素に自動設定

#### 例: AlertDialog
1. ダイアログを開く
2. 自動的にCancel ボタンにフォーカス
3. Tab/Shift+Tabでダイアログ内の要素を巡回
4. ダイアログの外にはフォーカスが出ない
5. 閉じると、元の要素にフォーカスが戻る

---

### 6. タッチターゲットサイズ ✅

#### デフォルト設定
shadcn/uiのコンポーネントは、**デフォルトで適切なサイズ**を持つ。

**本プロジェクトの基準との比較**:

| 要件 | 本プロジェクト | shadcn/ui |
|------|-------------|-----------|
| 最小サイズ | 24×24px | ✅ 満たす |
| 推奨サイズ | 44×44px | ✅ 満たす |
| チェックボックス | 24px + padding | ✅ 適切なサイズ |
| ボタン | min-height 44px | ✅ デフォルトで適切 |

**メリット**: 本プロジェクトで個別に実装した対策が不要になる。

---

### 7. カラーコントラスト ⚠️

#### 注意点
shadcn/uiはスタイルのテンプレートを提供するが、**カラーは自分で設定**する。

#### 対応
Tailwind CSSの設定ファイルで、WCAG 2.2のコントラスト要件を満たす色を選択すれば問題ない。

**推奨ツール**:
- [WebAIM Contrast Checker](https://webaim.org/resources/contrastchecker/)
- Chrome DevTools の Lighthouse

---

### 8. 実装例: アクセシビリティ機能

#### Dialog の実装
```tsx
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog"

<Dialog>
  <DialogTrigger>開く</DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>タイトル</DialogTitle>
      <DialogDescription>
        説明文
      </DialogDescription>
    </DialogHeader>
    {/* 内容 */}
  </DialogContent>
</Dialog>
```

**自動的に実装される機能**:
- ✅ `role="dialog"`
- ✅ `aria-labelledby` (タイトルを指す)
- ✅ `aria-describedby` (説明文を指す)
- ✅ フォーカストラップ
- ✅ Escapeキーで閉じる
- ✅ 背景のスクロール防止

#### Button の実装
```tsx
import { Button } from "@/components/ui/button"

<Button>クリック</Button>
```

**自動的に実装される機能**:
- ✅ `cursor: pointer`
- ✅ `:hover` 状態
- ✅ `:focus-visible` 状態
- ✅ 適切なサイズ（44px以上）
- ✅ キーボード操作（Enter, Space）

---

## 本プロジェクトとの比較

### 現在の実装
本プロジェクトでは以下を手動で実装した：
1. ボタンに`:focus-visible`を追加（27箇所以上）
2. チェックボックスのタッチターゲットサイズ拡大
3. Headerロゴのホバー・フォーカス状態
4. Homeツールカードのフォーカス状態

### shadcn/ui導入後
これらは**すべて不要**になる（デフォルトで実装済み）。

---

## 懸念点と対策

### 懸念1: コードを所有するため、誤った使い方をするリスク

**対策**:
- shadcn/uiのドキュメントに従う
- 各コンポーネントの使用例を参考にする
- Lighthouseで定期的にアクセシビリティ監査

### 懸念2: カスタマイズ時にアクセシビリティを損なう可能性

**対策**:
- ARIA属性やrole属性を削除しない
- キーボードイベントハンドラを上書きしない
- フォーカス管理のロジックを変更しない

### 懸念3: カラーコントラスト

**対策**:
- Tailwind CSS設定でWCAG準拠の色を選択
- Lighthouseでチェック

---

## 結論

### ✅ shadcn/uiは本プロジェクトのアクセシビリティ要件を**完全に満たす**

| 要件 | 満たすか | 詳細 |
|------|---------|------|
| WCAG準拠 | ✅ | WAI-ARIA準拠、WCAGテスト済み |
| キーボードナビゲーション | ✅ | WAI-ARIA Authoring Practices準拠 |
| スクリーンリーダー対応 | ✅ | 適切なアナウンスメント |
| ARIA属性 | ✅ | 自動処理 |
| フォーカス管理 | ✅ | 適切な実装 |
| タッチターゲットサイズ | ✅ | デフォルトで44px以上 |
| カラーコントラスト | ⚠️ | 自分で色を選択（対策可能） |

### メリット
1. **手動実装が不要**: 本プロジェクトで行った27箇所以上の修正が不要に
2. **エラーの削減**: 人為的なミスがなくなる
3. **保守性の向上**: アクセシビリティのベストプラクティスが常に適用される
4. **将来の対応**: 新しいWCAG要件にもRadix UIが対応

### 推奨
**shadcn/uiの導入を強く推奨**

アクセシビリティの観点からも、本プロジェクトに最適。

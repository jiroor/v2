# Plans.md - タスク管理

このファイルは、プロジェクトのタスクと進捗を管理します。

---

## 🚀 現在の優先タスク

### 外部ライブラリの遅延ローディング

**目的**: バンドルサイズをさらに削減し、初期ロード時間を改善

**現状**: 現在、外部ライブラリが常にバンドルに含まれている
**目標**: 必要なページでのみライブラリを読み込む

#### タスク

- [ ] html5-qrcode の遅延ローディング
  - [ ] 使用箇所の特定（カメラページ）
  - [ ] 動的 import() の実装
  - [ ] エラーハンドリングの追加
- [ ] qrcode の遅延ローディング
  - [ ] 使用箇所の特定（QRコード生成ページ）
  - [ ] 動的 import() の実装
  - [ ] エラーハンドリングの追加
- [ ] PeerJS の遅延ローディング
  - [ ] 使用箇所の特定（カメラ共有機能）
  - [ ] 動的 import() の実装
  - [ ] エラーハンドリングの追加
- [ ] ビルドして効果を確認
- [ ] バンドルサイズの改善を記録
- [ ] コミット

**期待される効果**:
- 初期ロードサイズのさらなる削減
- 特定の機能を使用する時のみライブラリを読み込み
- ユーザー体験の向上

---

## 📋 バックログ

### パフォーマンス最適化

- [ ] 画像最適化
  - [ ] public/ 内の画像を WebP 形式に変換
  - [ ] 画像の遅延ローディング
- [ ] CSS の最適化
  - [ ] 未使用 Tailwind クラスの削除

### PWA 改善

- [ ] オフラインキャッシュ戦略の最適化
- [ ] アプリアイコンの追加
- [ ] インストールプロンプトの実装

### アクセシビリティ

- [ ] すべてのページで ARIA ラベルを確認
- [ ] キーボードナビゲーションのテスト
- [ ] スクリーンリーダーのテスト
- [ ] カラーコントラスト比の確認

### テスト追加

- [ ] 主要コンポーネントのユニットテスト
- [ ] E2E テストの導入検討
- [ ] CI/CD パイプラインの構築

### 機能追加（検討中）

- [ ] ダークモード対応
- [ ] 多言語対応（英語）
- [ ] ツール使用統計のダッシュボード
- [ ] ツールのお気に入り機能

---

## ✅ 完了したタスク

### Phase 1: 基盤構築（完了）

- [x] プロジェクト設計
- [x] Vite + React セットアップ
- [x] ルーティング設定
- [x] 基本レイアウト作成
- [x] Tailwind CSS v4 + shadcn/ui セットアップ

### Phase 2: コアツール実装（完了）

- [x] カウントダウンタイマー
- [x] ストップウォッチ
- [x] 文字数カウンター
- [x] ポモドーロタイマー
- [x] テキスト差分
- [x] ランダム文字列生成
- [x] QRコード生成
- [x] パスワード生成
- [x] カラーピッカー
- [x] 現在日時表示（世界時計）
- [x] ルーレット

### Phase 3: 高度な機能（完了）

- [x] カメラ映像共有機能
- [x] PWA 対応
- [x] SEO 最適化
- [x] ツール使用状況トラッキング
- [x] キーボードショートカット
- [x] カメラ共有の共有機能強化（Phase 1）

### Phase 4: 最適化（完了）

- [x] バンドルサイズ最適化
  - [x] React.lazy() でページコンポーネントを遅延ローディング化
  - [x] App.tsx でルート定義を更新（React.lazy + Suspense）
  - [x] ビルドして効果を確認
  - [x] 目標達成（< 100KB）を確認

---

## 📝 ノート

### バンドルサイズの推移

| 日付 | サイズ (gzip) | メモ |
|------|--------------|------|
| 2025-01-16 (before) | 207.77 KB | 初回測定（目標超過） |
| 2025-01-16 (after) | 93-95 KB | React.lazy による最適化完了 ✅ 目標達成 |

### 技術的負債

1. ~~**バンドルサイズ超過**: 最優先で対応~~ ✅ 解決済み（2025-01-16）
2. **テスト不足**: E2E テストが未実装
3. **型定義の不完全性**: 一部で `any` が使用されている可能性

### 参考リンク

- [Vite - Code Splitting](https://vitejs.dev/guide/features.html#code-splitting)
- [React - Lazy Loading](https://react.dev/reference/react/lazy)
- [Web.dev - Bundle Size Optimization](https://web.dev/reduce-javascript-payloads-with-code-splitting/)

---

## 🔄 更新履歴

| 日付 | 変更内容 |
|------|---------|
| 2025-01-16 | Plans.md 初回作成、バンドルサイズ最適化タスクを追加 |
| 2025-01-16 | バンドルサイズ最適化完了（207.77 KB → 93-95 KB）、目標達成 |
